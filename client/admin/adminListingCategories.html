<template name="adminListingCategories">
    <div id="content">
      <div class="container">
	
        <div class="col-md-12">
          <div class="box text-center">
            <div class="row">
              <div class="col-sm-10 col-sm-offset-1">
                <h1>{{t "Marketplace admin"}} - {{t "Listing categories"}}</h1>
              </div>
            </div>
          </div>
        </div>

        <!-- *** LEFT COLUMN ***
             _________________________________________________________ -->

        <div class="col-sm-3">
          <!-- *** PAGES MENU *** -->

	  {{> adminMenu}}

          <!-- *** PAGES MENU END *** -->
        </div>        <!-- /.col-md-3 -->

        <!-- *** LEFT COLUMN END *** -->
	
        <!-- *** RIGHT COLUMN ***
             _________________________________________________________ -->

        <div class="col-md-9 clearfix">
	  <h3>{{t "Listing categories & subcategories"}}</h3>
          <div class="box" id="text-page">
	    {{#each categoriesParents}}
	    <div class="row">
	      <div class="col-md-9">
		{{#if editingCategory _id}}
		{{> editCategoryName}}
		{{else}}
		<b>{{name}}</b>
		{{/if}}
	      </div>
	      <div class="col-md-1 text-center">
		<span class="label label-default">{{countArr listings}}</span>&nbsp;
	      </div>
	      <div class="col-md-1 text-center">
		{{#if editingCategory _id}}
		<i class="fa fa-pencil"></i>&nbsp;
		{{else}}
		<a href="#"><i class="fa fa-pencil"></i></a>&nbsp;
		{{/if}}
	      </div>
	      <div class="col-md-1 text-center">
		{{#if letDelete this}}
		<a href="#" class="adminListingCategoryDelete"><i class="fa fa-trash"></i></a>
		{{else}}
		<i class="fa fa-trash"></i>
		{{/if}}
	      </div>
	      {{#each categoriesChildren}}
	      <div class="col-md-offset-1 col-md-8">
		{{#if editingCategory _id}}
		{{> editCategoryName}}
		{{else}}
		{{name}}
		{{/if}}
	      </div>
	      <div class="col-md-1 text-center">
		<span class="label label-default">{{countArr listings}}</span>&nbsp;
	      </div>
	      <div class="col-md-1 text-center">
		{{#if editingCategory _id}}
		<i class="fa fa-pencil"></i>&nbsp;
		{{else}}
		<a href="#"><i class="fa fa-pencil"></i></a>&nbsp;
		{{/if}}
	      </div>
	      <div class="col-md-1 text-center">
		{{#if letDelete this}}
		<a href="#" class="adminListingCategoryDelete"><i class="fa fa-trash"></i></a>
		{{else}}
		<i class="fa fa-trash"></i>
		{{/if}}
 	      </div>
	      {{/each}}
	    </div>
	    {{/each}}
	  </div>
	  <h3>{{t "Add new category"}}</h3>
          <div class="box" id="text-page">
	    <div class="row">
              {{#autoForm schema=categoriesSchemaObj id="adminListingCategories" type="method" meteormethod="saveAdminListingCategories"}}
              <fieldset>
		<div>
		  {{flash '1'}}
		</div>
		{{> afQuickField name="name"}}
		{{> afQuickField name="parent"}}

		<div class="text-center">
		  <button type="submit" class="btn btn-primary">{{t "Save"}}</button>
		  <button type="reset" class="btn btn-default">{{t "Reset"}}</button>
		</div>
              </fieldset>
              {{/autoForm}}
            </div>
          </div>
        </div>
        <!-- /.col-md-9 -->

        <!-- *** RIGHT COLUMN END *** -->
      </div>
      <!-- /.container -->
    </div>
    <!-- /#content -->

</template>

<template name = "editCategoryName">
  <form>
    <div class="input-group input-group-sm">
      <input type="text" class="form-control newCatName" value="{{name}}" id="{{_id}}">
      <span class="input-group-btn">
	<button class="btn btn-primary saveEdit" type="submit">{{t "SAVE"}}</button>
	<button class="btn btn-danger stopEdit"><span class="glyphicon glyphicon-remove"></span></button>
      </span>
    </div>
  </form>
</template>
