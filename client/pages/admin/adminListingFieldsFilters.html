<template name="adminListingFieldsFilters">
  <div class="row inner-page admin-dashboard">
    <div class="col s12">
      <h4>{{t "Listing fields & filters"}}</h4>
    </div>

    <div class="col s12">
      <h5>{{t "Listing categories & subcategories"}}</h5> <br>
    </div>

    <div class="fixed-action-btn" style="  top: 85px;right: 45px;">
      <a href="#modal1" class="modal-trigger btn-floating btn-large red waves-effect waves-light">
	<i class="large mdi-content-add"></i>
      </a>
    </div>

    <!-- Modal Structure -->
    <div id="modal1" class="modal">
      {{#autoForm schema=typesSchemaObj id="adminListingTypes" type="method" meteormethod="saveAdminListingTypes"}}
      <fieldset>
	<div class="modal-content add-type">
	  <h5>{{t "Add new listing type"}}</h5>
          {{> afQuickField name="listingType"}}
	</div>
	<div class="modal-footer">
          <div class="text-center">
            <button type="reset" class="btn-flat modal-close modal-action red-text"><i class="mdi-navigation-close left"></i>{{t "Reset"}}</button>
            <button type="submit" class="btn modal-close modal-action"><i class="mdi-navigation-check left"></i>{{t "Save"}}</button>
          </div>
	</div>
      </fieldset>
      {{/autoForm}}
    </div>


    <!-- Modal Structure to add filters -->
    <div id="modal2" class="modal">
      <div class="modal-content add-type">

        <h5><u>{{fieldTitle}}</u> {{t "field filter"}}</h5>
        {{#autoForm schema=oneFilterObj id="adminFilterUpdate" type="method" meteormethod="saveAdminFilterUpdate" doc=filterObj}}
        <fieldset>

          {{> afQuickField name="title" placeholder=fieldTitle}}
          {{> afQuickField name="active"}}
          {{> afFieldInput type="hidden" name="fieldName" value=fieldName}}

          <div class="text-center">
            <button type="reset" class="btn-flat modal-close modal-action red-text"><i class="mdi-navigation-close left"></i>{{t "Reset"}}</button>
            <button type="submit" class="btn modal-close modal-action"><i class="mdi-navigation-check left"></i>{{t "Save"}}</button>
          </div>
        </fieldset>
        {{/autoForm}}

      </div>
    </div>
		        

    <div class="col s12">
      <ul class="collapsible" data-collapsible="accordion">

        {{#each listingTypes}}
	<li>
	  <div class="collapsible-header teal white-text">
	    <div class="col s12">
	      <div class="col s8">
		{{#if editingTypeName listingType}}
		{{> editTypeName}}
		{{else}}
		<b>{{listingType}}</b>

		{{#if letEditTypeName}}
		<a href="#"><i class="fa fa-pencil editTypeName right"></i></a>
		{{/if}}

		{{/if}}
	      </div>
	      <div class="col s4 right-align	">
		<span class="label label-default">{{countListings listingType}}</span>

		<a href="#edit" class="btn-collapse">{{t "FIELDS"}}</a>

		{{#if letDelete this}}
		<a href="#" class="deleteType"><i class="fa fa-trash right"></i></a>
		{{else}}
		<i class="fa fa-trash right"></i>
		{{/if}}

	      </div>
	    </div>
	  </div>

	  <div class="collapsible-body">
	    {{> adminListingFieldsFiltersTypeView type=listingType}}
	  </div>
	</li>

        {{else}}
        {{t "No listing types yet."}}
        {{/each}}

      </ul>
    </div>
  </div>
</template>

<template name = "editTypeName">
  <form>
    <div class="input-group input-group-sm">
      <input type="text" class="form-control newTypeName" value="{{listingType}}">
      <span class="input-group-btn">
        <button class="btn btn-primary saveEdit" type="submit">{{t "SAVE"}}</button>
        <button class="btn btn-danger stopEdit"><span class="glyphicon glyphicon-remove"></span></button>
      </span>
    </div>
  </form>
</template>
