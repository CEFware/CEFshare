<template name="specificListingEdit">
    <div class="row inner-page edit-page">
        <div class="col s12 center-align">
            {{#if newListing}}
                <h5 class=""><span class="in-h3">{{t "Add new listing"}}</span></h5>
            {{else}}
                <h5 class=""><span class="in-h3">{{t " Edit Listing"}}</span></h5>
            {{/if}}
        </div>



        {{#autoForm schema=listingSchema id="specificListingCreate" type=formType meteormethod=formMethod doc=currentListing collection=formCollection}}
            <div>{{flash 'listingSaved'}}</div>
            <div class="col s12">
                <table class="bordered edit-table">
                    <tr>
                        <td class="subject-table"><strong>{{t "Select listing type"}}</strong></td>
                        <td class="valign-wrapper">

                            <div class="input-field col s12 m10 l10">
                                <select id="listingType" class="form-control input-sm">
                                    {{#each listingTypes}}
                                        <option value={{listingType}} {{ifSelected}}> {{listingType}} </option>
                                    {{/each}}
                                </select>
                            </div>

                        </td>
                    </tr>
                    {{#if isCategoryLoaded}}
                        {{#if ifCategorySelectedHasSub}}
                            <tr>
                                <td class="subject-table"><strong>{{t "Select listing category"}}</strong></td>
                                <td class="valign-wrapper">

                                    <div class="input-field col s12 m10 l10">
                                        <select id="listingCategory" class="form-control input-sm">
                                            <option value="" {{ifCategorySelected}}> {{t "Not selected"}} </option>
                                            {{#each listingParentCategories}}
                                                <option value={{name}} {{ifCategorySelected}}> {{name}} </option>
                                            {{/each}}
                                        </select>
                                    </div>

                                </td>
                            </tr>
                            <tr>
                                <td class="subject-table"><strong></strong></td>
                                <td class="valign-wrapper">
                                    <select id="listingSubCategory" class="form-control input-sm">
                                        <option value="" {{ifSubCategorySelected}}> {{t "Not selected"}} </option>
                                        {{#each listingChildrenCategories}}
                                            <option value={{name}} {{ifSubCategorySelected}}> {{name}} </option>
                                        {{/each}}
                                    </select>
                                </td>
                            </tr>
                        {{else}}
                            <tr>
                                <td class="subject-table"><strong>{{t "Select listing category"}}</strong></td>
                                <td class="valign-wrapper">
                                    <div class="input-field col s12 m10 l10">
                                        <select id="listingCategory" class="form-control input-sm">
                                            <option value="" {{ifCategorySelected}}> {{t "Not selected"}} </option>
                                            {{#each listingParentCategories}}
                                                <option value={{name}} {{ifCategorySelected}}> {{name}} </option>
                                            {{/each}}
                                        </select>
                                    </div>
                                </td>
                            </tr>
                        {{/if}}
                    {{else}}
                        <tr>
                            <td colspan="2">
                                <span class="center-align"> Loading Categories</span>
                            </td>
                        </tr>

                    {{/if}}
                    <tr>
                        <td class="subject-table"><strong>Title</strong></td>
                        <td>
                            <div class="input-field col s12 m10 l10">
                                {{> afQuickField name='title'}}
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="subject-table"><strong>Description</strong></td>
                        <td>
                            <div class="input-field col s12 m10 l10">
                                {{> afQuickField name='description'}}
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <div class="input-field col s12 m12 l12">
                                {{> afQuickField name='details' rows=5 class="ck-editor"}}
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="subject-table"><strong>Price</strong></td>
                        <td class="valign-wrapper">
                            <div class="col s6 m3 l3">
                                <div class="input-field">
                                    {{> afQuickField name='price'}}
                                </div>
                            </div>
                            <div class="col s4 l1 m1 center-align valign">
                                {{t "PER"}}
                            </div>
                            <div class="col s6">
                                {{> afQuickField name='itemName'}}
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="subject-table"></td>
                        <td>
                            <cite>{{t "You earn:"}} <strong><span id="earn"></span></strong>.
                                <span id="explanation"></span>
                            </cite>
                        </td>
                    </tr>
                    {{#if itemDay}}
                        <tr>
                            <td class="subject-table"><strong>{{t "Select unavailable days"}}</strong></td>
                            <td>
                                <div class="input-field col s12 m10 l10">
                                    {{> afQuickField name="daysPick"}}

                                </div>
                                <div class="input-group col s12 date">
                                    {{> afFieldInput name="datePick" buttonClasses="glyphicon glyphicon-calendar" pickadateOptions=dateOptions}}
                                </div>
                            </td>
                        </tr>
                        {{populateDates}}
                    {{/if}}
                    {{#if showField "shippingFee"}}
                        <tr>
                            <td class="subject-table"><strong>Shipping <br> (0 - no shipping)</strong></td>
                            <td>
                                <div class="input-field col s12 m10 l10">
                                    {{> afQuickField name='shippingFee'}}
                                </div>
                            </td>
                        </tr>

                    {{/if}}
                    {{#if showField "tax"}}
                        <tr>
                            <td class="subject-table"><strong>Tax in % (0 - no tax)</strong></td>
                            <td>
                                <div class="input-field col s12 m10 l10">
                                    {{> afQuickField name='tax'}}
                                </div>
                            </td>
                        </tr>
                    {{/if}}
                    {{#if showField "tags"}}
                        <tr>
                            <td class="subject-table"><strong>{{t "Tags"}}</strong></td>
                            <td>
                                <div class="input-field col s12 m10 l10">
                                    {{> afFieldInput name='tags' type='text' id='tagsField' data-role='materialtags'}}
                                    {{#if afFieldIsInvalid name='tags'}}
                                        <span class="help-block">{{afFieldMessage name='tags'}}</span>
                                    {{/if}}
                                </div>
                            </td>
                        </tr>
                    {{/if}}
                    {{#each customFields}}
                        <tr>
                            <td> {{> afQuickField name=this.name options=afOptionsFromSchema}} </td>
                        </tr>

                    {{/each}}
                </table>
            </div>
            <div class="row">
                <div class="col s12">


                    {{#if showField "isRibbonSale"}}
                        <div class="col s6">
                            <p>
                                {{> afQuickField name='isRibbonSale'}}
                            </p>

                        </div>
                    {{/if}}

                    {{#if showField "isRibbonNew"}}
                        <div class="col s6">
                            <p>
                                {{> afQuickField name='isRibbonNew'}}
                            </p>
                        </div>

                    {{/if}}
                    <div class="col s6">
                        <p>
                            {{> afQuickField name='isPublic'}}
                        </p>
                    </div>
                    <div class="col s6">

                    </div>


                    {{#if showField "active"}}
                        <div class="col s6">
                            <p>
                                {{> afQuickField name='active'}}
                            </p>

                        </div>

                    {{/if}}


                    <div class="col s6">
                        {{#if setDates}}
                            {{t "Set unavailable days of week:"}}

                            {{t "Set unavailable dates:"}}
                        {{/if}}
                    </div>

                    {{> afFieldInput type="hidden" name="listingType" value=listingTypeGet}}
                </div>
            </div>
            <div class="row">
                <div class="col s12 listing-image-wrapper">
                    {{> afQuickField name='image'}}
                </div>
            </div>
            <div class="row">
                <div class="col s12 center-align form-buttons">
                    <button type="submit" class="waves-effect waves-light btn"><i
                            class="mdi-navigation-check left"></i> {{t "Save"}}</button>
                    <button class="cancelEditListing deep-orange waves-effect waves-dark btn"><i
                            class="mdi-navigation-close left"></i> {{t "Cancel & don't save"}}</button>
                </div>
            </div>



        {{/autoForm}}


    </div>
</template>
